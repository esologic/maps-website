import{u as e,o as t,d as n,f as r,i as s,g as i,h as o,b as a,s as l,F as c,t as u,$ as g,p as d,q as p,r as f,c as y,v as h,w as v,l as b,x as m,n as x,e as w,S as O,_ as j}from"./main.js";var A=u("<div class=collection style=position:relative;width:100vw;height:100vh;>"),S=u("<img>");function I(u){const[g,{setIndex:d}]=e();let p=[];return t((()=>{console.log("onMount: imgs.length =",p.length),setTimeout((()=>{p.forEach(((e,t)=>{e?(console.log(`Image ${t} assigned at`,e.offsetLeft,e.offsetTop),t<5&&(e.src=e.dataset.src??""),e.addEventListener("click",(()=>{console.log(`Clicked image ${t}`)}),{passive:!0})):console.warn(`Image ${t} is not assigned!`)}))}),0)})),n(r((()=>u.isOpen()),(()=>{u.isOpen()||p[g().index]&&p[g().index].scrollIntoView({behavior:"auto",block:"center"})}),{defer:!0})),f=A(),s(f,i(c,{get each(){return u.ijs},children:(e,t)=>{return n=S(),o((e=>{p[t()]=e,console.log(`Assigned ref to image ${t()}`)}),n),n.style.setProperty("position","absolute"),n.style.setProperty("border","2px solid red"),a((r=>{var s=e.loImgH,i=e.loImgW,o=e.loUrl,a=e.alt,c=t()%5*200+"px",u=200*Math.floor(t()/5)+"px";return s!==r.e&&l(n,"height",r.e=s),i!==r.t&&l(n,"width",r.t=i),o!==r.a&&l(n,"data-src",r.a=o),a!==r.o&&l(n,"alt",r.o=a),c!==r.i&&(null!=(r.i=c)?n.style.setProperty("left",c):n.style.removeProperty("left")),u!==r.n&&(null!=(r.n=u)?n.style.setProperty("top",u):n.style.removeProperty("top")),r}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n;var n}})),f;var f}const P=Symbol("store-raw"),T=Symbol("store-node"),_=Symbol("store-has"),$=Symbol("store-self");function C(e){let t=e[g];if(!t&&(Object.defineProperty(e,g,{value:t=new Proxy(e,U)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const i=n[s];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function k(e){let t;return null!=e&&"object"==typeof e&&(e[g]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function D(e,t=new Set){let n,r,s,i;if(n=null!=e&&e[P])return n;if(!k(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,i=e.length;n<i;n++)s=e[n],(r=D(s,t))!==s&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let a=0,l=n.length;a<l;a++)i=n[a],o[i].get||(s=e[i],(r=D(s,t))!==s&&(e[i]=r))}return e}function E(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function L(e,t,n){if(e[t])return e[t];const[r,s]=y(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function M(e){p()&&L(E(e,T),$)()}const U={get(e,t,n){if(t===P)return e;if(t===g)return n;if(t===d)return M(e),n;const r=E(e,T),s=r[t];let i=s?s():e[t];if(t===T||t===_||"__proto__"===t)return i;if(!s){const n=Object.getOwnPropertyDescriptor(e,t);!p()||"function"==typeof i&&!e.hasOwnProperty(t)||n&&n.get||(i=L(r,t,i)())}return k(i)?C(i):i},has:(e,t)=>t===P||t===g||t===d||t===T||t===_||"__proto__"===t||(p()&&L(E(e,_),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return M(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==g&&t!==T?(delete n.value,delete n.writable,n.get=()=>e[g][t],n):n}};function F(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;void 0===n?(delete e[t],e[_]&&e[_][t]&&void 0!==s&&e[_][t].$()):(e[t]=n,e[_]&&e[_][t]&&void 0===s&&e[_][t].$());let o,a=E(e,T);if((o=L(a,t,s))&&o.$((()=>n)),Array.isArray(e)&&e.length!==i){for(let t=e.length;t<i;t++)(o=a[t])&&o.$();(o=L(a,"length",i))&&o.$(e.length)}(o=a[$])&&o.$()}function R(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];F(e,s,t[s])}}function q(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const i=typeof r,o=Array.isArray(e);if(Array.isArray(r)){for(let s=0;s<r.length;s++)q(e,[r[s]].concat(t),n);return}if(o&&"function"===i){for(let s=0;s<e.length;s++)r(e[s],s)&&q(e,[s].concat(t),n);return}if(o&&"object"===i){const{from:s=0,to:i=e.length-1,by:o=1}=r;for(let r=s;r<=i;r+=o)q(e,[r].concat(t),n);return}if(t.length>1)return void q(e[r],t,[r].concat(n));s=e[r],n=[r].concat(n)}let i=t[0];"function"==typeof i&&(i=i(s,n),i===s)||void 0===r&&null==i||(i=D(i),void 0===r||k(s)&&k(i)&&!Array.isArray(i)?R(s,i):F(e,r,i))}function z(...[e,t]){const n=D(e||{}),r=Array.isArray(n);return[C(n),function(...e){f((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=D(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&F(e,n,r)}F(e,"length",r)}else R(e,t)}(n,e[0]):q(n,e)}))}]}var H=u("<div class=slideContainer><img><div class=loadingText>");function K(n){let r,i,a;const[l]=e();return t((()=>{b().then((e=>{a=e})).catch((e=>{console.log(e)})),null==r||r.addEventListener("load",(()=>{m(r),m(i),l().index!==n.ij.index?(a.set(r,{opacity:1}),a.set(i,{opacity:0})):(a.to(r,{opacity:1,delay:.5,duration:.5,ease:"power3.out"}),a.to(i,{opacity:0,duration:.5,ease:"power3.in"}))}),{once:!0,passive:!0})})),g=(u=(c=H()).firstChild).nextSibling,"function"==typeof r?o(r,u):r=u,h(u,v((()=>n.load&&{src:n.ij.hiUrl}),{get height(){return n.ij.hiImgH},get width(){return n.ij.hiImgW},get"data-src"(){return n.ij.hiUrl},get alt(){return n.ij.alt},style:{opacity:0}}),!1),"function"==typeof i?o(i,g):i=g,s(g,(()=>n.loadingText)),c;var c,u,g}var V=u("<div class=nav><div><span class=num></span><span class=num></span><span class=num></span><span class=num></span><span>/</span><span class=num></span><span class=num></span><span class=num></span><span class=num></span></div><div>");function W(e){return e.charAt(0).toUpperCase()+e.slice(1)}function B(t){const[n]=e(),r=x((()=>w(n().index+1))),i=x((()=>w(n().length)));return y=(f=(p=(d=(g=(u=(c=(l=(a=(o=V()).firstChild).firstChild).nextSibling).nextSibling).nextSibling).nextSibling.nextSibling).nextSibling).nextSibling).nextSibling,h=a.nextSibling,s(l,(()=>r()[0])),s(c,(()=>r()[1])),s(u,(()=>r()[2])),s(g,(()=>r()[3])),s(d,(()=>i()[0])),s(p,(()=>i()[1])),s(f,(()=>i()[2])),s(y,(()=>i()[3])),s(h,(()=>W(t.closeText))),o;var o,a,l,c,u,g,d,p,f,y,h}var G=u("<div class=gallery><div class=galleryInner><div class=swiper-wrapper>"),J=u("<div class=curtain>"),N=u("<div class=swiper-slide>");function Q(a){let l,u,g,d,p;const f=W(a.loadingText);let h=-1,v=!1,x="none";const[w,{setIndex:A}]=e(),[S,I]=y(!1),[P,T]=z(Array(a.ijs.length).fill(!1));return t((()=>{window.addEventListener("touchstart",(()=>{b().then((e=>{l=e})).catch((e=>{console.log(e)})),async function(){return(await j((()=>import("./DX2W9I.js")),[])).Swiper}().then((e=>{m(p),u=new e(p,{spaceBetween:20}),u.on("slideChange",(({realIndex:e})=>{A(e)}))})).catch((e=>{console.log(e)})),I(!0)}),{once:!0,passive:!0}),v=!0})),n(r((()=>{w()}),(()=>{const e=w().index;var t;e!==h&&(x=-1===h?"none":e<h?"prev":e>h?"next":"none",t=e,(()=>{let e=[];const t=w(),n=t.index,r=Math.min(n+1,t.length-1),s=Math.max(n-1,0);switch(x){case"next":e=[r];break;case"prev":e=[s];break;case"none":e=[n,r,s]}var i;T((i=e).length<2?i:[...new Set(i)],!0)})(),u.slideTo(t,0),h=e)}))),n(r((()=>{a.isOpen()}),(()=>{a.isAnimating()||(a.isOpen()?S()&&v&&(a.setIsAnimating(!0),m(g),m(d),l.to(g,{opacity:1,duration:1}),l.to(d,{y:0,ease:"power3.inOut",duration:1,delay:.4}),setTimeout((()=>{a.setScrollable(!1),a.setIsAnimating(!1)}),1200)):(a.setIsAnimating(!0),m(d),m(g),l.to(d,{y:"100%",ease:"power3.inOut",duration:1}),l.to(g,{opacity:0,duration:1.2,delay:.4}),setTimeout((()=>{a.setScrollable(!0),a.setIsAnimating(!1),h=-1}),1400)))}),{defer:!0})),[(_=G(),$=_.firstChild,C=$.firstChild,"function"==typeof d?o(d,_):d=_,"function"==typeof p?o(p,$):p=$,s(C,i(O,{get when(){return S()},get children(){return i(c,{get each(){return a.ijs},children:(e,t)=>{return n=N(),s(n,i(K,{get load(){return P[t()]},ij:e,loadingText:f})),n;var n}})}})),s(_,i(B,{get closeText(){return a.closeText},get isAnimating(){return a.isAnimating},get setIsOpen(){return a.setIsOpen}}),null),_),(k=J(),"function"==typeof g?o(g,k):g=k,k)];var _,$,C,k}function X(e){const[t,n]=y(!1),[r,s]=y(!1);return i(O,{get when(){return e.ijs.length>0},get children(){return[i(I,{get ijs(){return e.ijs},isAnimating:r,isOpen:t,setIsOpen:n}),i(Q,{get ijs(){return e.ijs},get closeText(){return e.closeText},get loadingText(){return e.loadingText},isAnimating:r,setIsAnimating:s,isOpen:t,setIsOpen:n,get setScrollable(){return e.setScrollable}})]}})}export{X as default};