import{f as e,u as t,o as n,d as r,g as i,i as o,h as s,j as a,b as l,s as c,F as u,t as d,k as f,a as g,$ as p,q as y,r as h,v as m,c as v,w as b,x as w,l as O,y as j,p as x,e as A,S,_ as I}from"./main.js";var k=d("<div class=collection>"),$=d("<img>");function T(e,t){return Math.floor(Math.random()*(t-e+1))+e}function P(d){const f=Array(d.ijs.length),p=e(),[y,{setIndex:h}]=t(),m=e=>{if(p.clicktozoom){if(d.isAnimating())return;h(e),d.setIsOpen(!0)}},v=()=>{f[p.mobilepreanimatecount]&&f[p.mobilepreanimatecount].scrollIntoView({behavior:"auto",block:"center"})};return n((()=>{const e=document.querySelector(".container");function t(){const t=e.scrollTop,n=e.scrollHeight;t+e.clientHeight>=n-5&&(console.log("Scrolled to bottom of container!"),v())}e?(e.addEventListener("scroll",t),f.forEach(((e,t)=>{var n,r;t<p.mobilepreanimatecount&&(e.src=e.dataset.src),e.addEventListener("click",(()=>{m(t)}),{passive:!0}),e.addEventListener("keydown",(()=>{m(t)}),{passive:!0}),n=e,r=e=>!(e.intersectionRatio<=0||(t+p.mobilepreanimatecount<f.length&&(f[t+p.mobilepreanimatecount].src=f[t+p.mobilepreanimatecount].dataset.src),0)),new IntersectionObserver(((e,t)=>{for(const n of e)if(r(n)){t.disconnect();break}})).observe(n)})),v(),g((()=>{e.removeEventListener("scroll",t)}))):console.warn("No container element found for scroll listener")})),r(i((()=>{d.isOpen()}),(()=>{d.isOpen()||f[y().index].scrollIntoView({behavior:"auto",block:"center"})}),{defer:!0})),b=k(),o(b,s(u,{get each(){return d.ijs},children:(e,t)=>(()=>{var n=$();n.$$keydown=()=>{m(t())},n.$$click=()=>{m(t())};var r=f[t()];return"function"==typeof r?a(r,n):f[t()]=n,l((r=>{var i=e.loImgH,o=e.loImgW,s=e.loUrl,a=e.alt,l=`translate3d(${t()!==p.mobilepreanimatecount?T(-25,25):0}%, ${t()!==p.mobilepreanimatecount?T(-130,130):0}%, 0)`;return i!==r.e&&c(n,"height",r.e=i),o!==r.t&&c(n,"width",r.t=o),s!==r.a&&c(n,"data-src",r.a=s),a!==r.o&&c(n,"alt",r.o=a),l!==r.i&&(null!=(r.i=l)?n.style.setProperty("transform",l):n.style.removeProperty("transform")),r}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n})()})),b;var b}f(["click","keydown"]);const _=Symbol("store-raw"),E=Symbol("store-node"),C=Symbol("store-has"),L=Symbol("store-self");function D(e){let t=e[p];if(!t&&(Object.defineProperty(e,p,{value:t=new Proxy(e,z)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,o=n.length;i<o;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function H(e){let t;return null!=e&&"object"==typeof e&&(e[p]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function M(e,t=new Set){let n,r,i,o;if(n=null!=e&&e[_])return n;if(!H(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,o=e.length;n<o;n++)i=e[n],(r=M(i,t))!==i&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let a=0,l=n.length;a<l;a++)o=n[a],s[o].get||(i=e[o],(r=M(i,t))!==i&&(e[o]=r))}return e}function R(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function U(e,t,n){if(e[t])return e[t];const[r,i]=v(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function q(e){h()&&U(R(e,E),L)()}const z={get(e,t,n){if(t===_)return e;if(t===p)return n;if(t===y)return q(e),n;const r=R(e,E),i=r[t];let o=i?i():e[t];if(t===E||t===C||"__proto__"===t)return o;if(!i){const n=Object.getOwnPropertyDescriptor(e,t);!h()||"function"==typeof o&&!e.hasOwnProperty(t)||n&&n.get||(o=U(r,t,o)())}return H(o)?D(o):o},has:(e,t)=>t===_||t===p||t===y||t===E||t===C||"__proto__"===t||(h()&&U(R(e,C),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return q(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==p&&t!==E?(delete n.value,delete n.writable,n.get=()=>e[p][t],n):n}};function F(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],o=e.length;void 0===n?(delete e[t],e[C]&&e[C][t]&&void 0!==i&&e[C][t].$()):(e[t]=n,e[C]&&e[C][t]&&void 0===i&&e[C][t].$());let s,a=R(e,E);if((s=U(a,t,i))&&s.$((()=>n)),Array.isArray(e)&&e.length!==o){for(let t=e.length;t<o;t++)(s=a[t])&&s.$();(s=U(a,"length",o))&&s.$(e.length)}(s=a[L])&&s.$()}function V(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];F(e,i,t[i])}}function K(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,s=Array.isArray(e);if(Array.isArray(r)){for(let i=0;i<r.length;i++)K(e,[r[i]].concat(t),n);return}if(s&&"function"===o){for(let i=0;i<e.length;i++)r(e[i],i)&&K(e,[i].concat(t),n);return}if(s&&"object"===o){const{from:i=0,to:o=e.length-1,by:s=1}=r;for(let r=i;r<=o;r+=s)K(e,[r].concat(t),n);return}if(t.length>1)return void K(e[r],t,[r].concat(n));i=e[r],n=[r].concat(n)}let o=t[0];"function"==typeof o&&(o=o(i,n),o===i)||void 0===r&&null==o||(o=M(o),void 0===r||H(i)&&H(o)&&!Array.isArray(o)?V(i,o):F(e,r,o))}function W(...[e,t]){const n=M(e||{}),r=Array.isArray(n);return[D(n),function(...e){m((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=M(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&F(e,n,r)}F(e,"length",r)}else V(e,t)}(n,e[0]):K(n,e)}))}]}var B=d("<div class=slideContainer><img><div class=loadingText>");function N(e){let r,i,s;const[l]=t();return n((()=>{O().then((e=>{s=e})).catch((e=>{console.log(e)})),null==r||r.addEventListener("load",(()=>{j(r),j(i),l().index!==e.ij.index?(s.set(r,{opacity:1}),s.set(i,{opacity:0})):(s.to(r,{opacity:1,delay:.5,duration:.5,ease:"power3.out"}),s.to(i,{opacity:0,duration:.5,ease:"power3.in"}))}),{once:!0,passive:!0})})),d=(u=(c=B()).firstChild).nextSibling,"function"==typeof r?a(r,u):r=u,b(u,w((()=>e.load&&{src:e.ij.hiUrl}),{get height(){return e.ij.hiImgH},get width(){return e.ij.hiImgW},get"data-src"(){return e.ij.hiUrl},get alt(){return e.ij.alt},style:{opacity:0}}),!1),"function"==typeof i?a(i,d):i=d,o(d,(()=>e.loadingText)),c;var c,u,d}var G=d("<div class=nav><div><span class=num></span><span class=num></span><span class=num></span><span class=num></span><span>/</span><span class=num></span><span class=num></span><span class=num></span><span class=num></span></div><div>");function J(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Q(e){const[n]=t(),r=x((()=>A(n().index+1))),i=x((()=>A(n().length))),s=()=>{e.isAnimating()||e.setIsOpen(!1)};return h=(y=(p=(g=(f=(d=(u=(c=(l=(a=G()).firstChild).firstChild).nextSibling).nextSibling).nextSibling).nextSibling.nextSibling).nextSibling).nextSibling).nextSibling,m=l.nextSibling,o(c,(()=>r()[0])),o(u,(()=>r()[1])),o(d,(()=>r()[2])),o(f,(()=>r()[3])),o(g,(()=>i()[0])),o(p,(()=>i()[1])),o(y,(()=>i()[2])),o(h,(()=>i()[3])),m.$$keydown=s,m.$$click=s,o(m,(()=>J(e.closeText))),a;var a,l,c,u,d,f,g,p,y,h,m}f(["click","keydown"]);var X=d("<div class=gallery><div class=galleryInner><div class=swiper-wrapper>"),Y=d("<div class=curtain>"),Z=d("<div class=swiper-slide>");function ee(e){let l,c,d,f,g;const p=J(e.loadingText);let y=-1,h=!1,m="none";const[b,{setIndex:w}]=t(),[x,A]=v(!1),[k,$]=W(Array(e.ijs.length).fill(!1));return n((()=>{window.addEventListener("touchstart",(()=>{O().then((e=>{l=e})).catch((e=>{console.log(e)})),async function(){return(await I((()=>import("./DX2W9I.js")),[])).Swiper}().then((e=>{j(g),c=new e(g,{spaceBetween:20}),c.on("slideChange",(({realIndex:e})=>{w(e)}))})).catch((e=>{console.log(e)})),A(!0)}),{once:!0,passive:!0}),h=!0})),r(i((()=>{b()}),(()=>{const e=b().index;var t;e!==y&&(m=-1===y?"none":e<y?"prev":e>y?"next":"none",t=e,(()=>{let e=[];const t=b(),n=t.index,r=Math.min(n+1,t.length-1),i=Math.max(n-1,0);switch(m){case"next":e=[r];break;case"prev":e=[i];break;case"none":e=[n,r,i]}var o;$((o=e).length<2?o:[...new Set(o)],!0)})(),c.slideTo(t,0),y=e)}))),r(i((()=>{e.isOpen()}),(()=>{e.isAnimating()||(e.isOpen()?x()&&h&&(e.setIsAnimating(!0),j(d),j(f),l.to(d,{opacity:1,duration:1}),l.to(f,{y:0,ease:"power3.inOut",duration:1,delay:.4}),setTimeout((()=>{e.setScrollable(!1),e.setIsAnimating(!1)}),1200)):(e.setIsAnimating(!0),j(f),j(d),l.to(f,{y:"100%",ease:"power3.inOut",duration:1}),l.to(d,{opacity:0,duration:1.2,delay:.4}),setTimeout((()=>{e.setScrollable(!0),e.setIsAnimating(!1),y=-1}),1400)))}),{defer:!0})),[(T=X(),P=T.firstChild,_=P.firstChild,"function"==typeof f?a(f,T):f=T,"function"==typeof g?a(g,P):g=P,o(_,s(S,{get when(){return x()},get children(){return s(u,{get each(){return e.ijs},children:(e,t)=>{return n=Z(),o(n,s(N,{get load(){return k[t()]},ij:e,loadingText:p})),n;var n}})}})),o(T,s(Q,{get closeText(){return e.closeText},get isAnimating(){return e.isAnimating},get setIsOpen(){return e.setIsOpen}}),null),T),(E=Y(),"function"==typeof d?a(d,E):d=E,E)];var T,P,_,E}function te(e){const[t,n]=v(!1),[r,i]=v(!1);return s(S,{get when(){return e.ijs.length>0},get children(){return[s(P,{get ijs(){return e.ijs},isAnimating:r,isOpen:t,setIsOpen:n}),s(ee,{get ijs(){return e.ijs},get closeText(){return e.closeText},get loadingText(){return e.loadingText},isAnimating:r,setIsAnimating:i,isOpen:t,setIsOpen:n,get setScrollable(){return e.setScrollable}})]}})}export{te as default};