import{f as e,u as t,c as n,o as r,d as i,g as o,i as s,h as a,j as l,b as c,s as u,F as g,t as d,k as p,$ as f,q as y,r as h,v as m,w as v,x as b,l as w,y as O,p as j,e as x,S as A,_ as I}from"./main.js";var S=d("<div class=collection>"),k=d("<img>");function $(e,t){return Math.floor(Math.random()*(t-e+1))+e}function P(d){const p=Array(d.ijs.length),f=e(),[y,{setIndex:h}]=t(),[m,v]=n(0),b=e=>{if(f.clicktozoom){if(d.isAnimating())return;h(e),d.setIsOpen(!0)}};return r((()=>{p.forEach(((e,t)=>{var n,r;t<f.mobilepreanimatecount&&(e.src=e.dataset.src),e.addEventListener("click",(()=>{b(t)}),{passive:!0}),e.addEventListener("keydown",(()=>{b(t)}),{passive:!0}),n=e,r=e=>!(e.intersectionRatio<=0||(t+f.mobilepreanimatecount<p.length&&(p[t+f.mobilepreanimatecount].src=p[t+f.mobilepreanimatecount].dataset.src),0)),new IntersectionObserver(((e,t)=>{for(const n of e)if(r(n)){t.disconnect();break}})).observe(n)})),p[f.mobilepreanimatecount]&&p[f.mobilepreanimatecount].scrollIntoView({behavior:"auto",block:"center"})})),i(o((()=>{d.isOpen()}),(()=>{d.isOpen()||p[y().index].scrollIntoView({behavior:"auto",block:"center"})}),{defer:!0})),(w=S()).addEventListener("scroll",(e=>{const t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight&&(console.log("Scrolled to bottom, reloading images"),v((e=>e+1)))})),w.style.setProperty("overflowY","auto"),w.style.setProperty("height","100vh"),s(w,a(g,{get each(){return d.ijs},children:(e,t)=>(()=>{var n=k();n.$$keydown=()=>{b(t())},n.$$click=()=>{b(t())};var r=p[t()];return"function"==typeof r?l(r,n):p[t()]=n,c((r=>{var i=`${m()}-${t()}`,o=e.loImgH,s=e.loImgW,a=e.loUrl,l=e.alt,c=`translate3d(${t()!==f.mobilepreanimatecount?$(-25,25):0}%, ${t()!==f.mobilepreanimatecount?$(-130,130):0}%, 0)`;return i!==r.e&&u(n,"key",r.e=i),o!==r.t&&u(n,"height",r.t=o),s!==r.a&&u(n,"width",r.a=s),a!==r.o&&u(n,"data-src",r.o=a),l!==r.i&&u(n,"alt",r.i=l),c!==r.n&&(null!=(r.n=c)?n.style.setProperty("transform",c):n.style.removeProperty("transform")),r}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n})()})),w;var w}p(["click","keydown"]);const T=Symbol("store-raw"),_=Symbol("store-node"),C=Symbol("store-has"),E=Symbol("store-self");function D(e){let t=e[f];if(!t&&(Object.defineProperty(e,f,{value:t=new Proxy(e,z)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,o=n.length;i<o;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function L(e){let t;return null!=e&&"object"==typeof e&&(e[f]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function H(e,t=new Set){let n,r,i,o;if(n=null!=e&&e[T])return n;if(!L(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,o=e.length;n<o;n++)i=e[n],(r=H(i,t))!==i&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let a=0,l=n.length;a<l;a++)o=n[a],s[o].get||(i=e[o],(r=H(i,t))!==i&&(e[o]=r))}return e}function M(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function R(e,t,r){if(e[t])return e[t];const[i,o]=n(r,{equals:!1,internal:!0});return i.$=o,e[t]=i}function U(e){h()&&R(M(e,_),E)()}const z={get(e,t,n){if(t===T)return e;if(t===f)return n;if(t===y)return U(e),n;const r=M(e,_),i=r[t];let o=i?i():e[t];if(t===_||t===C||"__proto__"===t)return o;if(!i){const n=Object.getOwnPropertyDescriptor(e,t);!h()||"function"==typeof o&&!e.hasOwnProperty(t)||n&&n.get||(o=R(r,t,o)())}return L(o)?D(o):o},has:(e,t)=>t===T||t===f||t===y||t===_||t===C||"__proto__"===t||(h()&&R(M(e,C),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return U(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==f&&t!==_?(delete n.value,delete n.writable,n.get=()=>e[f][t],n):n}};function F(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],o=e.length;void 0===n?(delete e[t],e[C]&&e[C][t]&&void 0!==i&&e[C][t].$()):(e[t]=n,e[C]&&e[C][t]&&void 0===i&&e[C][t].$());let s,a=M(e,_);if((s=R(a,t,i))&&s.$((()=>n)),Array.isArray(e)&&e.length!==o){for(let t=e.length;t<o;t++)(s=a[t])&&s.$();(s=R(a,"length",o))&&s.$(e.length)}(s=a[E])&&s.$()}function V(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];F(e,i,t[i])}}function q(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,s=Array.isArray(e);if(Array.isArray(r)){for(let i=0;i<r.length;i++)q(e,[r[i]].concat(t),n);return}if(s&&"function"===o){for(let i=0;i<e.length;i++)r(e[i],i)&&q(e,[i].concat(t),n);return}if(s&&"object"===o){const{from:i=0,to:o=e.length-1,by:s=1}=r;for(let r=i;r<=o;r+=s)q(e,[r].concat(t),n);return}if(t.length>1)return void q(e[r],t,[r].concat(n));i=e[r],n=[r].concat(n)}let o=t[0];"function"==typeof o&&(o=o(i,n),o===i)||void 0===r&&null==o||(o=H(o),void 0===r||L(i)&&L(o)&&!Array.isArray(o)?V(i,o):F(e,r,o))}function K(...[e,t]){const n=H(e||{}),r=Array.isArray(n);return[D(n),function(...e){m((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=H(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&F(e,n,r)}F(e,"length",r)}else V(e,t)}(n,e[0]):q(n,e)}))}]}var W=d("<div class=slideContainer><img><div class=loadingText>");function B(e){let n,i,o;const[a]=t();return r((()=>{w().then((e=>{o=e})).catch((e=>{console.log(e)})),null==n||n.addEventListener("load",(()=>{O(n),O(i),a().index!==e.ij.index?(o.set(n,{opacity:1}),o.set(i,{opacity:0})):(o.to(n,{opacity:1,delay:.5,duration:.5,ease:"power3.out"}),o.to(i,{opacity:0,duration:.5,ease:"power3.in"}))}),{once:!0,passive:!0})})),g=(u=(c=W()).firstChild).nextSibling,"function"==typeof n?l(n,u):n=u,v(u,b((()=>e.load&&{src:e.ij.hiUrl}),{get height(){return e.ij.hiImgH},get width(){return e.ij.hiImgW},get"data-src"(){return e.ij.hiUrl},get alt(){return e.ij.alt},style:{opacity:0}}),!1),"function"==typeof i?l(i,g):i=g,s(g,(()=>e.loadingText)),c;var c,u,g}var Y=d("<div class=nav><div><span class=num></span><span class=num></span><span class=num></span><span class=num></span><span>/</span><span class=num></span><span class=num></span><span class=num></span><span class=num></span></div><div>");function G(e){return e.charAt(0).toUpperCase()+e.slice(1)}function J(e){const[n]=t(),r=j((()=>x(n().index+1))),i=j((()=>x(n().length))),o=()=>{e.isAnimating()||e.setIsOpen(!1)};return h=(y=(f=(p=(d=(g=(u=(c=(l=(a=Y()).firstChild).firstChild).nextSibling).nextSibling).nextSibling).nextSibling.nextSibling).nextSibling).nextSibling).nextSibling,m=l.nextSibling,s(c,(()=>r()[0])),s(u,(()=>r()[1])),s(g,(()=>r()[2])),s(d,(()=>r()[3])),s(p,(()=>i()[0])),s(f,(()=>i()[1])),s(y,(()=>i()[2])),s(h,(()=>i()[3])),m.$$keydown=o,m.$$click=o,s(m,(()=>G(e.closeText))),a;var a,l,c,u,g,d,p,f,y,h,m}p(["click","keydown"]);var N=d("<div class=gallery><div class=galleryInner><div class=swiper-wrapper>"),Q=d("<div class=curtain>"),X=d("<div class=swiper-slide>");function Z(e){let c,u,d,p,f;const y=G(e.loadingText);let h=-1,m=!1,v="none";const[b,{setIndex:j}]=t(),[x,S]=n(!1),[k,$]=K(Array(e.ijs.length).fill(!1));return r((()=>{window.addEventListener("touchstart",(()=>{w().then((e=>{c=e})).catch((e=>{console.log(e)})),async function(){return(await I((()=>import("./DX2W9I.js")),[])).Swiper}().then((e=>{O(f),u=new e(f,{spaceBetween:20}),u.on("slideChange",(({realIndex:e})=>{j(e)}))})).catch((e=>{console.log(e)})),S(!0)}),{once:!0,passive:!0}),m=!0})),i(o((()=>{b()}),(()=>{const e=b().index;var t;e!==h&&(v=-1===h?"none":e<h?"prev":e>h?"next":"none",t=e,(()=>{let e=[];const t=b(),n=t.index,r=Math.min(n+1,t.length-1),i=Math.max(n-1,0);switch(v){case"next":e=[r];break;case"prev":e=[i];break;case"none":e=[n,r,i]}var o;$((o=e).length<2?o:[...new Set(o)],!0)})(),u.slideTo(t,0),h=e)}))),i(o((()=>{e.isOpen()}),(()=>{e.isAnimating()||(e.isOpen()?x()&&m&&(e.setIsAnimating(!0),O(d),O(p),c.to(d,{opacity:1,duration:1}),c.to(p,{y:0,ease:"power3.inOut",duration:1,delay:.4}),setTimeout((()=>{e.setScrollable(!1),e.setIsAnimating(!1)}),1200)):(e.setIsAnimating(!0),O(p),O(d),c.to(p,{y:"100%",ease:"power3.inOut",duration:1}),c.to(d,{opacity:0,duration:1.2,delay:.4}),setTimeout((()=>{e.setScrollable(!0),e.setIsAnimating(!1),h=-1}),1400)))}),{defer:!0})),[(P=N(),T=P.firstChild,_=T.firstChild,"function"==typeof p?l(p,P):p=P,"function"==typeof f?l(f,T):f=T,s(_,a(A,{get when(){return x()},get children(){return a(g,{get each(){return e.ijs},children:(e,t)=>{return n=X(),s(n,a(B,{get load(){return k[t()]},ij:e,loadingText:y})),n;var n}})}})),s(P,a(J,{get closeText(){return e.closeText},get isAnimating(){return e.isAnimating},get setIsOpen(){return e.setIsOpen}}),null),P),(C=Q(),"function"==typeof d?l(d,C):d=C,C)];var P,T,_,C}function ee(e){const[t,r]=n(!1),[i,o]=n(!1);return a(A,{get when(){return e.ijs.length>0},get children(){return[a(P,{get ijs(){return e.ijs},isAnimating:i,isOpen:t,setIsOpen:r}),a(Z,{get ijs(){return e.ijs},get closeText(){return e.closeText},get loadingText(){return e.loadingText},isAnimating:i,setIsAnimating:o,isOpen:t,setIsOpen:r,get setScrollable(){return e.setScrollable}})]}})}export{ee as default};